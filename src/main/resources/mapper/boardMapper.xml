<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.app.edu.dao.BoardDAO">

	<select id="selectBoardTotalCount" resultType="int">
		SELECT COUNT(*)
		FROM board
	</select>

	<select id="selectBoardList"
		resultType="com.app.edu.model.Board">

		SELECT num,
		title,
		cnt,
		write_name,
		write_id,
		write_date,
		modify_id,
		modify_name,
		modify_date
		FROM board
		ORDER BY num DESC
		LIMIT
		#{from} , #{to}
	</select>




	<select id="selectBoard" parameterType="int"
		resultType="com.app.edu.model.Board">
		SELECT num,
		title,
		contents,
		cnt ,
		write_id,
		write_name,
		write_date,
		modify_name,
		modify_date
		FROM board
		WHERE num = #{num}
	</select>



	<select id="selectViewCount" resultType="int">
		SELECT nvl(cnt,0)
		FROM
		board
		WHERE num = #{num}
	</select>

	<insert id="insertBoard"
		parameterType="com.app.edu.model.Board"
		useGeneratedKeys="true" keyProperty="num">
		INSERT
		INTO board ( title,
		contents,write_id, write_name,write_date)
		VALUES ( #{title},
		#{contents},#{writeId},#{writeName},now() )

	</insert>

	<update id="updateCnt" parameterType="int">
		update board
		set cnt = (cnt
		+ 1)
		where num = #{num}
	</update>





	<update id="updateBoard"
		parameterType="com.app.edu.model.Board">
		UPDATE board
		SET
		title=#{title}, contents=#{contents},
		modify_id=#{modifyId},
		modify_name=#{modifyName}, modify_date = now()
		WHERE num = #{num}
	</update>

	<update id="updateBoardViewCount" parameterType="int">
		UPDATE board
		SET
		cnt = nvl(cnt,0) + 1
		WHERE num = #{num}


	</update>

	<delete id="deleteBoard" parameterType="int">
		DELETE
		FROM board
		WHERE num
		= #{num}
	</delete>



</mapper>
